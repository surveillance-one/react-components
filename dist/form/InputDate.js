import _slicedToArray from "@babel/runtime/helpers/esm/slicedToArray";
import React, { useState, useCallback, useRef, useEffect } from "react";
import DayPicker from "react-day-picker";
import "react-day-picker/lib/style.css";
import useOutClick from "../hooks/useOutClick";
import { IconWrapper } from "../ui/styles/globals";
import { Icon } from "../icon";
import { InputContainer, InputWrapper, DayPickerWrapper } from "./styles";

var InputDate = function InputDate(_ref) {
  var type = _ref.type,
      placeholder = _ref.placeholder,
      iconName = _ref.iconName,
      iconBg = _ref.iconBg,
      _ref$iconPosition = _ref.iconPosition,
      iconPosition = _ref$iconPosition === void 0 ? "left" : _ref$iconPosition,
      fullWidth = _ref.fullWidth,
      handleChange = _ref.handleChange,
      valStart = _ref.valStart,
      setVal = _ref.setVal;
  var node = useRef();
  var dateNode = useRef(); // const [val, setVal] = useState(new Date(valStart).toLocaleDateString());

  var _useState = useState(true),
      _useState2 = _slicedToArray(_useState, 2),
      valDate = _useState2[0],
      setValDate = _useState2[1];

  var _useState3 = useState(false),
      _useState4 = _slicedToArray(_useState3, 2),
      dayShow = _useState4[0],
      setDayShow = _useState4[1];

  var _useState5 = useState(false),
      _useState6 = _slicedToArray(_useState5, 2),
      rectRight = _useState6[0],
      setRectRight = _useState6[1];

  var _useState7 = useState(false),
      _useState8 = _slicedToArray(_useState7, 2),
      rectLeft = _useState8[0],
      setRectLeft = _useState8[1];

  console.log(new Date(valStart).toLocaleDateString());
  console.log(valStart);
  useEffect(function () {
    if (dateNode.current) {
      var rect = dateNode.current.getBoundingClientRect();
      if (rect.right > document.documentElement.offsetWidth) setRectRight(true);
      if (rect.left < 0) setRectLeft(true);
    }
  }, []); // useEffect(() => {
  // }, [onDayClick])

  useOutClick(setDayShow, node);

  var onDayClick = function onDayClick(day) {
    var newDay = day.toLocaleDateString();
    setVal({
      date: newDay
    }); // setVal(newDay);

    setValDate(true);
    setDayShow(false);
  };

  var onInputClick = useCallback(function () {
    setDayShow(!dayShow);
  }, [dayShow]);

  var validateDate = function validateDate(e) {
    var curVal = e.target.value;
    var regExDate = /^\d{1,2}\/\d{1,2}\/\d{4}$/;
    var match = !!curVal.match(regExDate);
    if (match) setValDate(true);else setValDate(false);
  };

  var handleChange1 = function handleChange1(e) {
    handleChange("date", e);
    validateDate(e); // setVal(e.target.value);
  };

  return React.createElement(InputWrapper, {
    match: valDate,
    ref: node,
    type: type,
    placeholder: placeholder,
    iconName: iconName,
    iconPosition: iconPosition,
    fullWidth: fullWidth
  }, React.createElement(InputContainer, {
    onClick: onInputClick,
    placeholder: placeholder,
    value: valStart,
    onChange: handleChange1
  }), iconName && React.createElement(IconWrapper, {
    bg: iconBg,
    iconPosition: iconPosition
  }, React.createElement(Icon, {
    icon: iconName
  })), dayShow && React.createElement(DayPickerWrapper, {
    ref: dateNode,
    rectRight: rectRight,
    rectLeft: rectLeft
  }, React.createElement(DayPicker, {
    onDayClick: onDayClick
  })));
};

export default InputDate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvZm9ybS9JbnB1dERhdGUuanN4Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZVJlZiIsInVzZUVmZmVjdCIsIkRheVBpY2tlciIsInVzZU91dENsaWNrIiwiSWNvbldyYXBwZXIiLCJJY29uIiwiSW5wdXRDb250YWluZXIiLCJJbnB1dFdyYXBwZXIiLCJEYXlQaWNrZXJXcmFwcGVyIiwiSW5wdXREYXRlIiwidHlwZSIsInBsYWNlaG9sZGVyIiwiaWNvbk5hbWUiLCJpY29uQmciLCJpY29uUG9zaXRpb24iLCJmdWxsV2lkdGgiLCJoYW5kbGVDaGFuZ2UiLCJ2YWxTdGFydCIsInNldFZhbCIsIm5vZGUiLCJkYXRlTm9kZSIsInZhbERhdGUiLCJzZXRWYWxEYXRlIiwiZGF5U2hvdyIsInNldERheVNob3ciLCJyZWN0UmlnaHQiLCJzZXRSZWN0UmlnaHQiLCJyZWN0TGVmdCIsInNldFJlY3RMZWZ0IiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJjdXJyZW50IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInJpZ2h0IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJvZmZzZXRXaWR0aCIsImxlZnQiLCJvbkRheUNsaWNrIiwiZGF5IiwibmV3RGF5IiwiZGF0ZSIsIm9uSW5wdXRDbGljayIsInZhbGlkYXRlRGF0ZSIsImUiLCJjdXJWYWwiLCJ0YXJnZXQiLCJ2YWx1ZSIsInJlZ0V4RGF0ZSIsIm1hdGNoIiwiaGFuZGxlQ2hhbmdlMSJdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU9BLEtBQVAsSUFDQ0MsUUFERCxFQUNXQyxXQURYLEVBQ3dCQyxNQUR4QixFQUNnQ0MsU0FEaEMsUUFFTyxPQUZQO0FBSUEsT0FBT0MsU0FBUCxNQUFzQixrQkFBdEI7QUFDQSxPQUFPLGdDQUFQO0FBQ0EsT0FBT0MsV0FBUCxNQUF3QixzQkFBeEI7QUFFQSxTQUFTQyxX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Q0FwQkQsQ0FERDtBQTRCQSxDQXJGRDs7QUE0RkEsZUFBZWhDLFNBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtcblx0dXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZUVmZmVjdFxufSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcbmltcG9ydCBEYXlQaWNrZXIgZnJvbSBcInJlYWN0LWRheS1waWNrZXJcIjtcbmltcG9ydCBcInJlYWN0LWRheS1waWNrZXIvbGliL3N0eWxlLmNzc1wiO1xuaW1wb3J0IHVzZU91dENsaWNrIGZyb20gXCIuLi9ob29rcy91c2VPdXRDbGlja1wiO1xuXG5pbXBvcnQgeyBJY29uV3JhcHBlciB9IGZyb20gXCIuLi91aS9zdHlsZXMvZ2xvYmFsc1wiO1xuXG5pbXBvcnQgeyBJY29uIH0gZnJvbSBcIi4uL2ljb25cIjtcblxuaW1wb3J0IHtcblx0SW5wdXRDb250YWluZXIsIElucHV0V3JhcHBlciwgRGF5UGlja2VyV3JhcHBlclxufSBmcm9tIFwiLi9zdHlsZXNcIjtcblxuY29uc3QgSW5wdXREYXRlID0gKHtcblx0dHlwZSwgcGxhY2Vob2xkZXIsIGljb25OYW1lLCBpY29uQmcsIGljb25Qb3NpdGlvbiA9IFwibGVmdFwiLCBmdWxsV2lkdGgsIGhhbmRsZUNoYW5nZSwgdmFsU3RhcnQsIHNldFZhbFxufSkgPT4ge1xuXHRjb25zdCBub2RlID0gdXNlUmVmKCk7XG5cdGNvbnN0IGRhdGVOb2RlID0gdXNlUmVmKCk7XG5cdC8vIGNvbnN0IFt2YWwsIHNldFZhbF0gPSB1c2VTdGF0ZShuZXcgRGF0ZSh2YWxTdGFydCkudG9Mb2NhbGVEYXRlU3RyaW5nKCkpO1xuXHRjb25zdCBbdmFsRGF0ZSwgc2V0VmFsRGF0ZV0gPSB1c2VTdGF0ZSh0cnVlKTtcblx0Y29uc3QgW2RheVNob3csIHNldERheVNob3ddID0gdXNlU3RhdGUoZmFsc2UpO1xuXHRjb25zdCBbcmVjdFJpZ2h0LCBzZXRSZWN0UmlnaHRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXHRjb25zdCBbcmVjdExlZnQsIHNldFJlY3RMZWZ0XSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuXHRjb25zb2xlLmxvZyhuZXcgRGF0ZSh2YWxTdGFydCkudG9Mb2NhbGVEYXRlU3RyaW5nKCkpO1xuXHRjb25zb2xlLmxvZyh2YWxTdGFydCk7XG5cblxuXHR1c2VFZmZlY3QoKCkgPT4ge1xuXHRcdGlmIChkYXRlTm9kZS5jdXJyZW50KSB7XG5cdFx0XHRjb25zdCByZWN0ID0gZGF0ZU5vZGUuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRcdGlmIChyZWN0LnJpZ2h0ID4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoKSBzZXRSZWN0UmlnaHQodHJ1ZSk7XG5cdFx0XHRpZiAocmVjdC5sZWZ0IDwgMCkgc2V0UmVjdExlZnQodHJ1ZSk7XG5cdFx0fVxuXHR9LCBbXSk7XG5cblx0Ly8gdXNlRWZmZWN0KCgpID0+IHtcblxuXHQvLyB9LCBbb25EYXlDbGlja10pXG5cblx0dXNlT3V0Q2xpY2soc2V0RGF5U2hvdywgbm9kZSk7XG5cblx0Y29uc3Qgb25EYXlDbGljayA9IChkYXkpID0+IHtcblx0XHRjb25zdCBuZXdEYXkgPSBkYXkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG5cdFx0c2V0VmFsKHsgZGF0ZTogbmV3RGF5IH0pO1xuXHRcdC8vIHNldFZhbChuZXdEYXkpO1xuXHRcdHNldFZhbERhdGUodHJ1ZSk7XG5cdFx0c2V0RGF5U2hvdyhmYWxzZSk7XG5cdH07XG5cblx0Y29uc3Qgb25JbnB1dENsaWNrID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuXHRcdHNldERheVNob3coIWRheVNob3cpO1xuXHR9LCBbZGF5U2hvd10pO1xuXG5cblx0Y29uc3QgdmFsaWRhdGVEYXRlID0gKGUpID0+IHtcblx0XHRjb25zdCBjdXJWYWwgPSBlLnRhcmdldC52YWx1ZTtcblx0XHRjb25zdCByZWdFeERhdGUgPSAvXlxcZHsxLDJ9XFwvXFxkezEsMn1cXC9cXGR7NH0kLztcblxuXHRcdGNvbnN0IG1hdGNoID0gISFjdXJWYWwubWF0Y2gocmVnRXhEYXRlKTtcblx0XHRpZiAobWF0Y2gpIHNldFZhbERhdGUodHJ1ZSk7XG5cdFx0ZWxzZSBzZXRWYWxEYXRlKGZhbHNlKTtcblx0fTtcblxuXHRjb25zdCBoYW5kbGVDaGFuZ2UxID0gKGUpID0+IHtcblx0XHRoYW5kbGVDaGFuZ2UoXCJkYXRlXCIsIGUpO1xuXHRcdHZhbGlkYXRlRGF0ZShlKTtcblx0XHQvLyBzZXRWYWwoZS50YXJnZXQudmFsdWUpO1xuXHR9O1xuXG5cdHJldHVybiAoXG5cdFx0PElucHV0V3JhcHBlclxuXHRcdFx0bWF0Y2g9e3ZhbERhdGV9XG5cdFx0XHRyZWY9e25vZGV9XG5cdFx0XHR0eXBlPXt0eXBlfVxuXHRcdFx0cGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuXHRcdFx0aWNvbk5hbWU9e2ljb25OYW1lfVxuXHRcdFx0aWNvblBvc2l0aW9uPXtpY29uUG9zaXRpb259XG5cdFx0XHRmdWxsV2lkdGg9e2Z1bGxXaWR0aH0+XG5cdFx0XHQ8SW5wdXRDb250YWluZXJcblx0XHRcdFx0b25DbGljaz17b25JbnB1dENsaWNrfVxuXHRcdFx0XHRwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9XG5cdFx0XHRcdHZhbHVlPXt2YWxTdGFydH1cblx0XHRcdFx0b25DaGFuZ2U9e2hhbmRsZUNoYW5nZTF9Lz5cblx0XHRcdHtpY29uTmFtZSAmJlxuXHRcdDxJY29uV3JhcHBlclxuXHRcdFx0Ymc9e2ljb25CZ31cblx0XHRcdGljb25Qb3NpdGlvbj17aWNvblBvc2l0aW9ufT5cblx0XHRcdDxJY29uIGljb249e2ljb25OYW1lfS8+XG5cdFx0PC9JY29uV3JhcHBlcj59XG5cdFx0XHR7ZGF5U2hvdyAmJlxuXHRcdFx0PERheVBpY2tlcldyYXBwZXIgcmVmPXtkYXRlTm9kZX0gcmVjdFJpZ2h0PXtyZWN0UmlnaHR9IHJlY3RMZWZ0PXtyZWN0TGVmdH0+XG5cdFx0XHRcdDxEYXlQaWNrZXIgb25EYXlDbGljaz17b25EYXlDbGlja30vPlxuXHRcdFx0PC9EYXlQaWNrZXJXcmFwcGVyPlxuXHRcdFx0fVxuXHRcdDwvSW5wdXRXcmFwcGVyPlxuXHQpO1xuXG59O1xuXG5JbnB1dERhdGUucHJvcFR5cGVzID0ge1xuXHR0eXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxuXHRwbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IElucHV0RGF0ZTtcbiJdfQ==